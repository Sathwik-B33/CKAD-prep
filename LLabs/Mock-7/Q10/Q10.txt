One co-worker deployed an nginx helm chart on the cluster1 server called bitnami. A new update is pushed to the helm chart, and the team wants you to update the helm repository to fetch the new changes.


After updating the helm chart, upgrade the helm chart version to 18.3.0 and increase the replica count to 2.

NOTE: - We have to perform this task on the cluster1-controlplane node.


You can SSH into the cluster1 using ssh cluster1-controlplane command.

soln:


In this task, we will use the kubectl and helm commands. Here are the steps: -



Log in to the cluster1-controlplane node first and use the helm ls command to list all the releases installed using Helm in the Kubernetes cluster.
helm ls -A

Here -A or --all-namespaces option lists all the releases of all the namespaces.


Identify the namespace where the resources get deployed.


Use the helm repo ls command to list the helm repositories.
helm repo ls

Now, update the helm repository with the following command: -
helm repo update bitnami -n ckad10-finance-ns

The above command updates the local cache of available charts from the configured chart repositories.

The helm search command searches for all the available charts in a specific Helm chart repository. In our case, it's the nginx helm chart.
helm search repo bitnami/nginx -n ckad10-finance-ns -l | head -n30


The -l or --versions option is used to display information about all available chart versions.

Upgrade the helm chart to 18.3.0 and also, increase the replica count of the deployment to 2 from the command line. Use the helm upgrade command as follows: -
helm upgrade bitnami bitnami/nginx -n ckad10-finance-ns --version=18.3.0 --set replicaCount=2

After upgrading the chart version, you can verify it with the following command: -
helm ls -n ckad10-finance-ns

Look under the CHART column for the chart version.

Use the kubectl get command to check the replicas of the deployment: -
kubectl get deploy -n ckad10-finance-ns

The available count 2 is under the AVAILABLE column.

